# 用户使用指南

本指南将帮助您快速上手 FFmpeg GUI，掌握所有功能的使用方法。

## 目录

- [快速开始](#快速开始)
- [功能详解](#功能详解)
  - [格式转换](#格式转换)
  - [视频压缩](#视频压缩)
  - [任务队列管理](#任务队列管理)
  - [设置](#设置)
- [常见问题](#常见问题)
- [故障排除](#故障排除)

---

## 快速开始

### 首次启动

1. **启动应用**
   - macOS: 在 Applications 文件夹中双击 FFmpeg GUI
   - Windows: 从开始菜单或桌面快捷方式启动
   - Linux: 运行 AppImage 或从应用菜单启动

2. **FFmpeg 检测**

   首次启动时，应用会自动检测系统中是否安装了 FFmpeg：

   - **已安装**: 显示 FFmpeg 版本信息，可直接使用
   - **未安装**: 显示下载提示，点击"下载 FFmpeg"自动下载

   ![FFmpeg 检测](screenshots/ffmpeg-detect.png)

3. **开始使用**

   FFmpeg 就绪后，即可开始使用所有功能。

---

## 功能详解

### 格式转换

将视频或音频文件转换为其他格式。

#### 基本转换流程

1. **进入转换页面**

   点击侧边栏的"转换"标签。

2. **添加文件**

   有两种方式添加文件：
   - **拖拽**: 直接将文件拖入虚线框内
   - **点击选择**: 点击"选择文件"按钮，从文件选择器中选择

   ![文件上传](screenshots/file-upload.png)

3. **选择输出格式**

   在右侧面板中选择目标格式：

   - **视频格式**: MP4, AVI, MKV, MOV, WMV, FLV, WebM, 等
   - **音频格式**: MP3, AAC, WAV, FLAC, OGG, 等
   - **其他格式**: GIF, M4A, OPUS, 等

   ![格式选择](screenshots/format-select.png)

4. **配置参数（可选）**

   **快速预设**（推荐新手）：
   - Web 优化（H.264, 适合网络分享）
   - 高质量（保留原始质量）
   - 快速转换（快速编码）
   - 社交媒体（适合上传到社交平台）
   - 邮件附件（小文件大小）
   - 存档（最佳兼容性）

   **高级选项**（进阶用户）：
   - 视频编解码器
   - 音频编解码器
   - 视频比特率
   - 音频比特率
   - 帧率
   - 分辨率
   - 编码速度/质量预设

   ![参数配置](screenshots/convert-config.png)

5. **开始转换**

   点击"开始转换"按钮，任务将被添加到队列。

#### 批量转换

1. 一次性上传多个文件
2. 为所有文件选择相同的输出格式和参数
3. 所有文件将自动添加到任务队列依次处理

#### 输出文件位置

默认情况下，转换后的文件保存在：
- 与源文件相同的目录
- 文件名格式：`原文件名_converted.输出格式`

---

### 视频压缩

在保持视频质量的前提下减小文件大小。

#### 压缩模式

##### 1. 快速预设

选择预定义的压缩方案：

- **轻度压缩** (CRF 23): 接近原始质量，文件减小 ~30%
- **中度压缩** (CRF 26): 良好的质量/大小平衡，文件减小 ~50%
- **高度压缩** (CRF 28): 较小文件，质量略有损失，文件减小 ~70%
- **H.265 压缩**: 使用 H.265 编码器，更高压缩率
- **社交媒体**: 适合上传到社交平台（720p, CRF 25）
- **邮件附件**: 极小文件（480p, CRF 30）

![快速预设](screenshots/compress-presets.png)

##### 2. CRF 质量模式

使用 CRF（恒定质量因子）控制压缩质量：

- **极高质量** (CRF 18): 几乎无损，文件较大
- **高质量** (CRF 20): 极好的视觉质量
- **中高质量** (CRF 23): 默认推荐
- **中等质量** (CRF 26): 良好的平衡
- **中低质量** (CRF 28): 明显压缩，文件小
- **低质量** (CRF 32): 高压缩率，质量损失明显

> **提示**: CRF 值越低，质量越高，文件越大

##### 3. 目标大小模式

指定目标文件大小，系统自动计算最佳比特率：

- 拖动滑块选择 10-500 MB
- 适合需要控制文件大小的场景（如邮件附件限制）

![目标大小](screenshots/target-size.png)

##### 4. 自定义模式

完全手动控制所有参数：

- 视频编解码器（H.264, H.265, VP9, AV1）
- 音频编解码器（AAC, MP3, Opus）
- CRF 值
- 比特率
- 分辨率
- 编码速度

#### 压缩建议

| 用途 | 推荐模式 | 说明 |
|------|----------|------|
| 保存到云盘 | 中度压缩 | 平衡质量和大小 |
| 邮件发送 | 邮件附件预设 | 极小文件 |
| 社交媒体 | 社交媒体预设 | 适配平台要求 |
| 存档保存 | 轻度压缩或 CRF 18 | 保持高质量 |
| 移动设备 | 中度压缩 + 降分辨率 | 节省存储空间 |

---

### 任务队列管理

查看和管理所有转换/压缩任务。

#### 任务状态

- **等待中** (灰色): 在队列中等待执行
- **运行中** (蓝色): 正在处理，显示实时进度
- **已暂停** (黄色): 已暂停执行
- **已完成** (绿色): 成功完成
- **失败** (红色): 处理失败，显示错误信息
- **已取消** (灰色): 用户取消

![任务队列](screenshots/task-queue.png)

#### 任务信息

每个任务卡片显示：

1. **基本信息**
   - 输入文件名
   - 输出文件名
   - 任务状态

2. **进度信息**（运行中任务）
   - 进度条（百分比）
   - 处理速度（如 1.87x）
   - 剩余时间（ETA）
   - 帧率（FPS）
   - 当前文件大小
   - 当前比特率

3. **时间信息**
   - 创建时间
   - 开始时间
   - 完成时间
   - 总耗时

#### 任务操作

- **暂停** (⏸): 暂停正在运行的任务
- **继续** (▶): 恢复已暂停的任务
- **取消** (✕): 取消等待中或运行中的任务
- **重试** (🔄): 重新执行失败或取消的任务

#### 批量操作

- **清除已完成**: 一键清除所有已完成的任务
- **任务过滤**: 按状态筛选任务
  - 全部
  - 等待中
  - 运行中
  - 已完成
  - 失败/取消

#### 并发控制

默认情况下，同时运行的任务数为 2。可以在设置页面调整最大并发任务数（1-4）。

---

### 设置

在设置页面可以配置应用行为。

#### 外观设置

- **主题模式**（新增）
  - 浅色：使用浅色主题（白色背景，深色文本）
  - 深色：使用深色主题（深色背景，浅色文本）
  - 跟随系统：自动跟随操作系统主题设置（推荐）
  - 主题切换立即生效，无需重启应用

#### FFmpeg 设置

- **查看版本**: 查看当前 FFmpeg 版本
- **更新 FFmpeg**: 下载最新版本
- **自定义路径**: 使用自定义安装的 FFmpeg

#### 任务设置

- **最大并发任务数**: 同时运行的任务数量（1-4）
  - 1: 逐个处理，占用资源少
  - 2: 默认值，平衡性能和资源
  - 3-4: 快速处理，需要更多 CPU 和内存

- **自动清理**: 自动清理已完成任务的数量限制
  - 默认保留最新 100 个已完成任务

#### 输出设置

- **默认输出目录**: 设置转换后文件的默认保存位置
  - 与源文件相同目录（默认）
  - 自定义目录

- **文件命名模式**:
  - `{name}_converted.{ext}`（默认）
  - `{name}_output.{ext}`
  - 自定义模式

---

## 常见问题

### Q1: 支持哪些格式？

**A**: 支持 FFmpeg 支持的所有格式，包括但不限于：

**视频**: MP4, AVI, MKV, MOV, WMV, FLV, WebM, MPEG, M4V, 3GP, TS, VOB

**音频**: MP3, AAC, WAV, FLAC, OGG, WMA, M4A, OPUS, AC3, DTS

**图像**: GIF

### Q2: 转换速度有多快？

**A**: 取决于多个因素：
- 原文件大小和格式
- 目标格式和参数
- 计算机硬件性能
- 当前并发任务数

通常情况下，速度为 0.5x - 3x 实时速度。

### Q3: 会损失画质吗？

**A**:
- 使用"高质量"预设或 CRF 18-20 时，几乎无损
- 使用默认参数时，质量损失极小，肉眼难以察觉
- 压缩模式会有一定质量损失，但可通过 CRF 控制

### Q4: 可以转换 4K 视频吗？

**A**: 可以。应用支持任意分辨率的视频，包括 4K、8K。处理时间会相应增加。

### Q5: 文件大小限制是多少？

**A**: 没有硬性限制，取决于系统可用内存和磁盘空间。

### Q6: 支持硬件加速吗？

**A**: 当前版本使用软件编码。硬件加速（GPU）将在未来版本中支持。

---

## 故障排除

### 问题: FFmpeg 下载失败

**原因**: 网络连接问题

**解决方法**:
1. 检查网络连接
2. 尝试使用 VPN
3. 手动下载 FFmpeg 并在设置中指定路径

### 问题: 任务失败

**原因**:
- 输入文件损坏
- 参数配置不当
- 磁盘空间不足

**解决方法**:
1. 检查错误信息
2. 尝试使用默认参数
3. 确保磁盘有足够空间
4. 更换输入文件测试

### 问题: 应用卡死

**原因**:
- 处理超大文件
- 系统资源不足

**解决方法**:
1. 降低并发任务数
2. 暂停部分任务
3. 关闭其他占用资源的应用
4. 重启应用

### 问题: 输出文件无法播放

**原因**:
- 播放器不支持该编解码器
- 文件损坏

**解决方法**:
1. 使用 VLC 等通用播放器
2. 尝试使用其他格式或编解码器
3. 检查输入文件是否正常

---

## 获取帮助

如果您遇到本文档未涵盖的问题：

1. **查看日志**
   - 点击"设置" -> "查看日志"
   - 查找错误信息

2. **搜索已知问题**
   - [GitHub Issues](https://github.com/your-repo/FFmpeg-GUI/issues)

3. **提交新问题**
   - 提供详细描述
   - 附加日志文件
   - 说明操作系统和版本

4. **社区讨论**
   - [GitHub Discussions](https://github.com/your-repo/FFmpeg-GUI/discussions)

---

## 快捷键

| 快捷键 | 功能 |
|--------|------|
| `Cmd/Ctrl + O` | 打开文件 |
| `Cmd/Ctrl + ,` | 打开设置 |
| `Cmd/Ctrl + Q` | 退出应用 |
| `Cmd/Ctrl + R` | 刷新界面 |

---

**祝您使用愉快！**

如有建议，欢迎反馈到 [GitHub](https://github.com/your-repo/FFmpeg-GUI/issues)。
