# FFmpeg GUI 视觉设计概览

## 设计哲学

FFmpeg GUI 的设计理念是**专业、简洁、高效**。我们的目标是创建一个既专业又易用的视频处理工具，它应该：

- **为专业人士而设计**：这不是一个玩具应用，而是严肃的视频处理工具
- **信息密度优化**：在不牺牲可读性的前提下，展示最大量的有用信息
- **实时反馈优先**：处理进度、状态变化必须清晰可见
- **跨平台一致性**：在 macOS、Windows、Linux 上提供一致的体验
- **无障碍优先**：默认支持键盘导航和屏幕阅读器

### 核心设计原则

#### 1. 现代极简主义（Modern Minimalism）
- **减少视觉噪音**：只保留必要的元素，每个元素都有明确的功能
- **精炼的排版**：使用 Inter Variable 字体，清晰的层次结构
- **微妙的深度**：通过阴影和高度创建视觉层次，而不是过度使用颜色

#### 2. 功能驱动设计（Functionality-First）
- **信息优先**：重要数据（进度、速度、ETA）始终可见
- **快速访问**：常用操作（转换、压缩）只需 2-3 次点击
- **批量处理支持**：设计支持多文件和并发任务管理

#### 3. 实时响应性（Real-time Responsiveness）
- **即时反馈**：所有用户操作都有立即的视觉反馈
- **流畅的动画**：过渡自然，不干扰工作流程
- **进度可视化**：FFmpeg 处理进度实时更新，带有详细指标

#### 4. 专业可靠性（Professional Reliability）
- **错误处理清晰**：错误信息明确，提供解决方案
- **状态明确**：任务状态（pending、running、completed、failed）一目了然
- **数据完整性**：所有操作都有确认步骤，防止误操作

## 用户画像分析

### 主要用户群体

#### 1. 视频创作者（60%）
**特征**：
- 需要频繁进行格式转换和压缩
- 对输出质量有明确要求
- 批量处理需求高
- 熟悉基本的视频参数（码率、分辨率、编解码器）

**需求**：
- 快速批量转换
- 质量预设（快速选择）
- 进度监控和 ETA
- 输出文件大小预估

#### 2. 技术人员/开发者（25%）
**特征**：
- 理解 FFmpeg 命令行参数
- 需要自定义高级选项
- 可能需要集成到工作流程

**需求**：
- 高级参数配置
- 命令行预览
- 详细的日志输出
- 批量脚本支持

#### 3. 普通用户（15%）
**特征**：
- 偶尔需要转换视频格式
- 对技术参数不熟悉
- 希望简单易用

**需求**：
- 简单的向导式流程
- 智能预设选择
- 清晰的错误提示
- 一键式操作

### 使用场景分析

#### 场景 1：批量视频转换
**流程**：
1. 拖放多个视频文件
2. 选择目标格式（MP4、WebM 等）
3. 选择质量预设（高/中/低）
4. 点击"转换"
5. 监控任务队列进度

**设计要点**：
- 文件列表清晰展示（带缩略图或图标）
- 批量操作按钮（全选、清空）
- 实时进度汇总（总进度、单个任务进度）

#### 场景 2：视频压缩优化
**流程**：
1. 选择单个大视频文件
2. 查看原始文件信息（大小、码率、编解码器）
3. 选择压缩目标（目标大小或 CRF 质量）
4. 预览压缩参数
5. 开始压缩

**设计要点**：
- 文件信息详细展示（MediaInfo 组件）
- 压缩前后对比（预估输出大小）
- CRF 滑块直观易用
- 实时压缩进度和速度

#### 场景 3：格式兼容性转换
**流程**：
1. 选择不兼容的视频文件
2. 系统检测并推荐兼容格式
3. 一键应用推荐设置
4. 快速转换

**设计要点**：
- 智能格式检测
- 推荐设置高亮显示
- 快速预设按钮

## 关键设计决策

### 1. 颜色系统选择

**主色调：蓝色（Primary Blue）**
- **为什么选择蓝色**：专业、可信、冷静，适合工具类应用
- **色值**：`hsl(217, 91%, 60%)` - 鲜明但不刺眼
- **应用场景**：主要操作按钮、进度条、激活状态

**语义颜色：**
- **成功绿**：`hsl(142, 71%, 45%)` - 任务完成、操作成功
- **警告黄**：`hsl(45, 93%, 58%)` - 提示信息、注意事项
- **错误红**：`hsl(0, 84%, 60%)` - 失败状态、错误提示

**中性色调：**
- **深色主题**：背景 `hsl(220, 18%, 8%)`，专业且护眼
- **浅色主题**：背景 `hsl(0, 0%, 100%)`，干净明亮

**决策理由**：
- 高对比度保证可读性（WCAG AA 标准）
- 语义明确（绿=成功、红=错误）
- 深色主题适合长时间使用

### 2. 排版系统

**字体选择：Inter Variable**
- **原因**：
  - 极高的可读性（设计用于屏幕显示）
  - 变体字重支持（400-700）
  - 优秀的中文字体回退
  - 开源免费

**字体层次：**
```
- Display (40px)：页面主标题
- H1 (32px)：大型区域标题
- H2 (24px)：卡片标题、区域标题
- H3 (18px)：子标题
- Body (14px)：正文、表单
- Caption (12px)：元数据、辅助信息
- Micro (11px)：状态标签、小标签
```

**技术参数字体：JetBrains Mono**
- **使用场景**：文件路径、FFmpeg 命令、日志输出
- **原因**：等宽字体，代码友好，清晰区分技术内容

### 3. 间距和布局网格

**4px 基础单位系统**
- 所有间距都是 4 的倍数（4、8、12、16、24、32...）
- 与 Tailwind CSS 完美契合
- 易于记忆和应用

**组件间距规范：**
- **卡片内边距**：24px（`--space-6`）
- **区域间距**：24px（`--space-6`）
- **元素间距**：16px（`--space-4`）
- **表单元素间距**：12px（`--space-3`）

### 4. 高度和阴影系统

**五级高度系统：**
```
Level 0 (平面)：背景、平面内容
Level 1 (抬起)：卡片、列表项（默认状态）
Level 2 (悬浮)：hover 状态、焦点状态
Level 3 (浮动)：模态框、弹出菜单
Level 4 (覆盖)：Toast 通知、关键警告
```

**设计理由**：
- 明确的视觉层次
- 交互状态清晰（hover = 提升一级）
- 深色模式下增强阴影对比度

### 5. 动画和过渡策略

**三种速度级别：**
- **快速（150ms）**：按钮点击、hover 效果
- **标准（200-300ms）**：展开/折叠、状态变化
- **慢速（400-600ms）**：页面进入、庆祝动画

**缓动函数选择：**
- `ease-out`：进入动画（快速开始，慢速结束）
- `ease-in-out`：状态变化（平滑过渡）
- `cubic-bezier(0.175, 0.885, 0.32, 1.275)`：弹跳效果（庆祝动画）

**减少动效支持：**
```css
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    transition-duration: 0.01ms !important;
  }
}
```

## 视觉层次策略

### 信息优先级

#### 1. 最高优先级（Primary Focus）
- **任务进度条**：宽度、颜色、动画效果突出
- **主要操作按钮**：大尺寸、高对比度颜色
- **错误消息**：红色背景、大图标、清晰文字

**视觉处理**：
- 大尺寸（按钮 48px 高度）
- 高对比度颜色（Primary、Success、Error）
- 显著位置（页面上方、右侧）

#### 2. 高优先级（Secondary Focus）
- **文件列表**：文件名、大小、格式信息
- **任务状态**：运行中、完成、失败
- **配置选项**：格式选择、质量设置

**视觉处理**：
- 中等尺寸（14-16px 字体）
- 次要颜色（文本主色、边框）
- 卡片或分组展示

#### 3. 中优先级（Tertiary）
- **元数据**：创建时间、文件路径
- **性能指标**：FPS、速度、比特率
- **辅助说明**：提示文字、帮助信息

**视觉处理**：
- 小字号（12px Caption）
- 灰色文字（`--text-secondary`）
- 紧凑布局

#### 4. 低优先级（Background）
- **装饰性元素**：分隔线、背景图案
- **次要控制**：高级选项、设置按钮
- **状态栏信息**：版本号、系统信息

**视觉处理**：
- 最小字号（11px Micro）
- 浅灰色（`--text-tertiary`）
- 折叠或隐藏

### 颜色对比和可访问性

**WCAG 2.1 AA 标准遵守：**
- **正文文字对比度**：至少 4.5:1
- **大字体对比度**：至少 3:1
- **图标和图形对比度**：至少 3:1

**测试工具**：
- Chrome DevTools Lighthouse
- axe DevTools
- WAVE Extension

**实施检查清单**：
- [ ] 所有文本颜色通过对比度测试
- [ ] 焦点状态有 2px 清晰边框
- [ ] 所有交互元素支持键盘导航
- [ ] 状态变化有屏幕阅读器公告

## 设计系统如何支持核心功能

### 1. 实时进度跟踪

**设计支持：**
- **进度条组件**：带光晕动画（shimmer effect）
- **状态指示器**：颜色编码（蓝=运行中、绿=完成、红=失败）
- **性能指标网格**：速度、ETA、FPS、比特率一目了然

**技术实现：**
```tsx
// 进度条带动画效果
<div className="relative w-full h-2 bg-gray-200 rounded-full overflow-hidden">
  <div
    className="absolute inset-y-0 left-0 bg-gradient-to-r from-primary-500 to-primary-600 rounded-full transition-all duration-300"
    style={{ width: `${progress}%` }}
  >
    <div className="absolute inset-0 animate-shimmer bg-gradient-to-r from-transparent via-white/20 to-transparent" />
  </div>
</div>
```

### 2. 批量任务管理

**设计支持：**
- **任务卡片系统**：清晰展示每个任务状态
- **过滤和排序**：按状态快速过滤（全部、运行中、已完成）
- **批量操作按钮**：清除已完成、全部暂停、全部取消

**布局策略：**
```
┌─────────────────────────────────────────┐
│ 任务队列                                 │
│ [全部(10)] [运行中(2)] [已完成(5)] ...  │
├─────────────────────────────────────────┤
│ ┌─────────────────────────────────────┐ │
│ │ 任务 1 - 运行中 (75%)                │ │
│ │ [进度条] FPS: 30 | 速度: 1.5x       │ │
│ └─────────────────────────────────────┘ │
│ ┌─────────────────────────────────────┐ │
│ │ 任务 2 - 运行中 (45%)                │ │
│ └─────────────────────────────────────┘ │
└─────────────────────────────────────────┘
```

### 3. 文件选择和预览

**设计支持：**
- **拖放区域**：大面积、虚线边框、清晰提示
- **文件列表**：可折叠、显示媒体信息
- **MediaInfo 组件**：编解码器、分辨率、时长、比特率

**交互流程：**
1. 拖放文件 → 虚线边框高亮
2. 文件添加 → 淡入动画
3. 点击展开 → MediaInfo 滑入

### 4. 错误处理和验证

**设计支持：**
- **表单验证**：实时验证，错误信息紧邻输入框
- **错误状态卡片**：红色边框、错误图标、错误消息
- **Toast 通知**：全局错误提示，可操作（重试、忽略）

**错误显示层级：**
1. **内联错误**：表单字段下方（小、局部）
2. **卡片错误**：任务卡片中（中、明显）
3. **Toast 错误**：全局通知（大、紧急）

## 响应式和适配策略

### 窗口大小适配

**最小窗口尺寸：**
- 宽度：1024px
- 高度：768px

**断点系统（Tailwind 标准）：**
```
sm: 640px   - 小型笔记本
md: 768px   - 平板横屏
lg: 1024px  - 桌面（基准）
xl: 1280px  - 大桌面
2xl: 1536px - 超大屏幕
```

**布局适配：**
- **< 1024px**：单列布局（文件列表和配置上下排列）
- **≥ 1024px**：双列布局（文件列表左侧，配置右侧）
- **≥ 1536px**：三列布局（文件、配置、实时预览）

### 跨平台一致性

**macOS 特性：**
- 系统标题栏（集成窗口控制按钮）
- 拖拽区域（`-webkit-app-region: drag`）
- 毛玻璃效果（vibrancy API）

**Windows 特性：**
- 自定义标题栏（Electron 无边框窗口）
- Acrylic 背景效果（Windows 10+）
- 深色模式遵循系统设置

**Linux 特性：**
- GTK 主题集成
- 自适应标题栏
- 深色模式检测

**统一策略：**
- 核心 UI 100% 一致（按钮、卡片、表单）
- 平台特性作为增强（不影响核心功能）
- 使用 Electron API 检测平台并应用特定样式

## 设计交付物清单

### 1. 完整设计文档
- [x] 设计概览（本文档）
- [ ] 页面布局规范
- [ ] 组件设计规范
- [ ] 交互模式指南
- [ ] 动画和动效指南
- [ ] 开发实施指南

### 2. 设计资源
- [ ] Figma 设计稿（推荐）
- [ ] 颜色调色板（CSS 变量）
- [ ] 图标库（Lucide React）
- [ ] 字体文件（Inter Variable、JetBrains Mono）

### 3. 代码示例
- [ ] 组件库（基于 ShadCN UI）
- [ ] Tailwind 配置文件
- [ ] CSS 自定义属性（index.css）
- [ ] 动画工具类

### 4. 测试和验证
- [ ] 视觉回归测试（Playwright）
- [ ] 无障碍测试（axe、WAVE）
- [ ] 性能测试（Lighthouse）
- [ ] 跨平台测试（macOS、Windows、Linux）

## 下一步行动

### 第一阶段：设计文档完善（当前）
1. 完成所有设计文档编写
2. 创建详细的组件规范
3. 定义完整的交互模式

### 第二阶段：设计系统实施
1. 更新 Tailwind 配置
2. 创建 CSS 自定义属性
3. 实施核心组件（Button、Card、Input）

### 第三阶段：页面重构
1. 按新设计重构各页面
2. 实施动画和微交互
3. 无障碍优化

### 第四阶段：测试和优化
1. 视觉回归测试
2. 性能优化
3. 跨平台测试

## 总结

FFmpeg GUI 的视觉设计以**专业、简洁、高效**为核心，通过：

- **清晰的视觉层次**：信息优先级明确
- **一致的设计语言**：颜色、排版、间距系统化
- **实时的用户反馈**：进度、状态、错误清晰可见
- **无障碍优先**：键盘导航、屏幕阅读器支持
- **跨平台一致性**：macOS、Windows、Linux 统一体验

这套设计系统不仅提升了应用的美观度，更重要的是**提高了用户的工作效率和使用体验**，使 FFmpeg GUI 成为一款真正专业的视频处理工具。
